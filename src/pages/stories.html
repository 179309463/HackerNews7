<template>
        <div class="page" data-name="stories">
            <div class="navbar">
              <div class="navbar-inner">
                <div class="left">
                  <a href="#" class="link icon-only panel-open" data-panel="left">
                    <i class="icon f7-icons ios-only">menu</i>
                    <i class="icon material-icons md-only">menu</i>
                  </a>
                </div>
                <div class="title sliding">HackerNews7</div>
              </div>
            </div>
            <div class="toolbar">
              <div class="toolbar-inner">
                {{#each endpoints}}
                    <a href="#" class="link">{{@key}}</a>
                {{/each}}
              </div>
            </div>
            <div class="page-content">
                <div class="list">
                    <ul>
                    {{#stories}}
                        <li class="item-content">
                            <div class="item-inner">
                                <div class="item-title">{{title}}</div>
                            </div>
                        </li>
                    {{/stories}}
                    </ul>
                </div>
            </div>
    </template>
    <script>
        return {
            data() {
                return {
                    stories: null,
                    endpoints: {
                        top: 'news',
                        new: 'newest',
                        ask: 'ask',
                        jobs: 'jobs',
                        show: 'show'
                    },
                }
            },
            on: {
                pageInit() {
                    var self = this;
                    var app = self.$app;
                    app.request.get('https://api.hnpwa.com/v0/news.json', (stories) => {
                        self.$setState({
                            stories: JSON.parse(stories),
                        })
                    })
                },
            },
        }
    </script>